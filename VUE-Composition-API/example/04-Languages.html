<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Languages</title>
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/04-Languages.css" />
  </head>
  <body>
    <div id="app">
      <select v-model="lang">
        <option value="zh-TW">zh-TW</option>
        <option value="en">en</option>
      </select>
    </div>
    <script src="./js/vue.js"></script>
    <script type="module">
      import {
        useLanguages,
        useSetLanguagesFn,
      } from "./composition-api/useLanguages.js";
      const { ref, onMounted, watch } = Vue;
      const App = {
        setup() {
          const lang = ref(useLanguages().lang.value);

          watch(lang, (newLang) => {
            useSetLanguagesFn().set(newLang);
          });

          onMounted(() => {
            useSetLanguagesFn().set(lang.value);
          });

          return { lang };
        },
      };
      Vue.createApp(App).mount("#app");
    </script>
  </body>
</html>
